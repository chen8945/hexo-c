const cdn={gh:{jsdelivr:"https://cdn.jsdelivr.net/gh",fastly:"https://fastly.jsdelivr.net/gh",gcore:"https://gcore.jsdelivr.net/gh",testingcf:"https://testingcf.jsdelivr.net/gh",test1:"https://test1.jsdelivr.net/gh",tianli:"https://cdn1.tianli0.top/gh",jjz:"https://jsd.onmicrosoft.cn/gh",jnt:"https://cdn.bilicdn.tk/gh"},combine:{jsdelivr:"https://cdn.jsdelivr.net/combine",fastly:"https://fastly.jsdelivr.net/combine",gcore:"https://gcore.jsdelivr.net/combine",testingcf:"https://testingcf.jsdelivr.net/combine",test1:"https://test1.jsdelivr.net/combine",tianli:"https://cdn1.tianli0.top/combine",jjz:"https://jsd.onmicrosoft.cn/combine",jnt:"https://cdn.bilicdn.tk/combine"},npm:{jsdelivr:"https://cdn.jsdelivr.net/npm",fastly:"https://fastly.jsdelivr.net/npm",gcore:"https://gcore.jsdelivr.net/npm",testingcf:"https://testingcf.jsdelivr.net/npm",test1:"https://test1.jsdelivr.net/npm",unpkg:"https://unpkg.com",tianli:"https://cdn1.tianli0.top/npm",jjz:"https://jsd.onmicrosoft.cn/npm",jnt:"https://cdn.bilicdn.tk/npm",sourceg:"https://npm.sourcegcdn.com",adn:"https://adn.arcitcgn.cn/npm"}};async function progress(t){return new Response(await t.arrayBuffer(),{status:t.status,headers:t.headers})}function handleRequest(t){const n=[],e=t.url;let s=new URL(e);const i=s.pathname.split("/")[1];for(const t in cdn)if(t===i)for(const e in cdn[t]){const r=cdn[t][e]+s.pathname.replace("/"+i,"");n.push(r)}if(n.length)return fetchAny(n);throw new Error("failure")}function createPromiseAny(){Promise.any=function(t){return new Promise(((n,e)=>{let s=(t=Array.isArray(t)?t:[]).length,i=[];if(0===s)return e(new AggregateError("All promises were rejected"));t.forEach((t=>{t instanceof Promise?t.then((t=>n(t)),(t=>{s--,i.push(t),0===s&&e(new AggregateError(i))})):e(t)}))}))}}function fetchAny(t){const n=new AbortController,e=n.signal,s=t.map((t=>new Promise(((s,i)=>{fetch(t,{signal:e}).then(progress).then((t=>{const e=t.clone();200!==e.status&&i(null),n.abort(),s(e)})).catch((()=>i(null)))}))));return Promise.any||createPromiseAny(),Promise.any(s).then((t=>t)).catch((()=>null))}self.addEventListener("install",(async()=>{await self.skipWaiting()})),self.addEventListener("activate",(async()=>{await self.clients.claim()})),self.addEventListener("fetch",(async t=>{try{const n=navigator,{saveData:e,effectiveType:s}=n.connection||n.mozConnection||n.webkitConnection||{};if(e||/2g/.test(s))return;t.respondWith(handleRequest(t.request))}catch(t){}}));